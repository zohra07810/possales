<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>POS Receipt</title>
<style>
  body { margin: 0; padding: 0; font-family: monospace; background: #fff; }
  .receipt { width: 640px; max-width: 100%; padding: 10px; box-sizing: border-box; font-size: 16px; }
  h2 { text-align: center; font-size: 20px; margin: 5px 0; }
  p { text-align: center; font-size: 16px; margin: 5px 0; }
  .line { border-top: 1px dashed #000; margin: 8px 0; }
  table { width: 100%; border-collapse: collapse; font-size: 16px; }
  td { padding: 4px 0; }
  .right { text-align: right; }
  .total { font-weight: bold; font-size: 18px; }
  button { width: 100%; padding: 10px; margin-top: 10px; font-size: 16px; cursor: pointer; }
  @media print { button { display: none; } }
</style>
</head>
<body>

<div class="receipt">
  <h2>MY RESTAURANT</h2>
  <p>Thank you!</p>
  <div class="line"></div>

  <table id="items"></table>

  <div class="line"></div>

  <table>
    <tr>
      <td>Subtotal</td>
      <td class="right" id="subtotal"></td>
    </tr>
    <tr>
      <td>Discount</td>
      <td class="right" id="discountText"></td>
    </tr>
    <tr class="total">
      <td>Total</td>
      <td class="right" id="total"></td>
    </tr>
  </table>

  <button onclick="window.print()">Print Receipt</button>
</div>

<script>
const cart = JSON.parse(localStorage.getItem("cart")) || [];
const discountAmount = parseFloat(localStorage.getItem("discount")) || 0;

const itemsTable = document.getElementById("items");
let subtotal = 0;

cart.forEach(item => {
  const itemTotal = item.price * (item.qty || 1);
  const row = document.createElement("tr");
  row.innerHTML = `<td>${item.name} x${item.qty || 1}</td>
                   <td class="right">₱${itemTotal.toFixed(2)}</td>`;
  itemsTable.appendChild(row);
  subtotal += itemTotal;
});

const total = Math.max(0, subtotal - discountAmount);
document.getElementById("subtotal").textContent = "₱" + subtotal.toFixed(2);
document.getElementById("discountText").textContent = "-₱" + discountAmount.toFixed(2);
document.getElementById("total").textContent = "₱" + total.toFixed(2);
</script>

</body>
</html>
