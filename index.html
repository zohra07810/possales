<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#06812b">
<link rel="icon" href="baigsLogo.png" type="image/png">

<title>POS ‚Äì Main Page</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body { font-family: Arial; margin: 20px; }
  h1, h2, h3 { text-align: center; }
  .logo { display: block; margin: 0 auto 20px; max-width: 150px; }
  .menu, .cart { margin-bottom: 20px; }
  button { margin: 5px; padding: 5px 10px; cursor: pointer; }
 table {
  width: 100%;
  border-collapse: collapse;
  font-size: 16px;
}
  th, td {
  border: 1px solid #ddd;
  padding: 8px;
  text-align: left;
  white-space: nowrap; /* keep cells in one line */
}

  .cart {
  overflow-x: auto; /* allow horizontal scroll if needed */
}

  .qty-container { display: flex; align-items: center; justify-content: center; }
  .qty-container button { padding: 3px 8px; margin: 0; font-size: 16px; cursor: pointer; }
  .qty-container span { margin: 0 5px; min-width: 20px; text-align: center; display: inline-block; font-size: 16px; }

  @media (max-width: 480px) {
    .qty-container button { padding: 2px 6px; font-size: 14px; }
    .qty-container span { font-size: 14px; min-width: 18px; }
  }

 @media (max-width: 480px) {
  table {
    font-size: 12px;
  }

  th, td {
    padding: 3px;
  }

  th:nth-child(4) { font-size: 10px; } /* Upgrade */
  th:nth-child(5) { font-size: 10px; } /* Action */
  
  .qty-container span { min-width: 15px; }
  .qty-container button { padding: 1px 3px; font-size: 10px; }
}

 .backBtn {
  display: block;            /* stays on its own line */
  width: auto;               /* only as wide as the content */
  background-color: #be3016; /* button color */
  color: white;              /* text color */
  border: none;
  padding: 4px 10px;         /* smaller padding */
  cursor: pointer;
  border-radius: 5px;
  margin-bottom: 10px;       /* space below button */
  font-size: 14px;           /* smaller font */
  text-align: left;          /* align text to left */
}


/* SAVE MODAL */
#saveModal {
  display: none;
  position: fixed; top:0; left:0; right:0; bottom:0;
  background: rgba(0,0,0,0.5);
  z-index: 1000;
  justify-content: center;
  align-items: center;
}
#saveModalContent {
  background: #06812b;
  color: white;
  padding: 20px;
  border-radius: 10px;
  width: 90%;
  max-width: 350px;
  text-align: center;
}
#saveModalContent select {
  width: 90%;
  padding: 5px;
  margin: 5px 0;
  font-size: 16px;
}
#saveModalContent button {
  padding: 6px 12px;
  margin: 5px;
  cursor: pointer;
  border: none;
  border-radius: 5px;
  font-size: 14px;
}
#saveYes { background: white; color: #06812b; }
#saveCancel { background: #555; color: white; }

.payment-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin: 6px 0;
}

.payment-row span {
  font-size: 14px;
}

.payment-row input {
  width: 90px;
  padding: 4px;
  font-size: 14px;
}

/* Horizontal scroll for waitlist table only */
.waitlist-table-wrapper {
  overflow-x: auto;    /* allows horizontal scroll */
  overflow-y: hidden;  /* disables vertical scroll */
  width: 100%;
}

.waitlist-table-wrapper table {
  width: max-content; /* table can expand horizontally */
  min-width: 100%;    /* optional: ensures it fills container if small */
  border-collapse: collapse;
}

.waitlist-table-wrapper th, 
.waitlist-table-wrapper td {
  padding: 8px 12px;
  border: 1px solid #ccc;
  text-align: left;
  white-space: nowrap; /* prevent text from wrapping */
}

/* Category buttons */
.category-btn {
  background: #0b5329;
  color: #fff;
  padding: 12px;
  margin: 6px;
  border: none;
  border-radius: 6px;
  font-size: 16px;
}

/* Variant buttons */
.variant-btn {
  background: #2c3e50; /* green */
  color: #fff;
  padding: 12px;
  margin: 6px;
  border: none;
  border-radius: 6px;
  font-size: 16px;
}

/* Size buttons */
.size-btn {
  background: #f39c12; /* orange */
  color: #000;
  padding: 14px;
  margin: 6px;
  border: none;
  border-radius: 6px;
  font-size: 14px;

}

/* Back buttons */
.backBtn {
  background: #c0392b;
  color: #fff;
  padding: 10px;
  margin: 6px;
  border: none;
  border-radius: 6px;
  font-size: 14px;
}

/* Touch feedback */
button:active {
  transform: scale(0.97);
}


</style>
</head>
<body  style="background-color: #e0e4cd;">
  <script>
// Check if admin is logged in
if (localStorage.getItem("adminLoggedIn") !== "true") {
  // Redirect to login page if not logged in
  window.location.href = "login.html";
}
</script>

<div class="waitlist-table-wrapper">
  <table id="waitlistTable">
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Date</th>
        <th>Total</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>



<!-- Save Modal -->
<div id="saveModal">
  <div id="saveModalContent">

      <div style="margin-bottom:10px; font-size:16px; font-weight:bold; color: #e6ff07;">
    Total to Pay: ‚Ç±<span id="totalDue">0.00</span>
  </div>

  <div style="margin-top:12px; padding:8px; background:#056622; border-radius:6px;">
  <div style="font-size:14px;">
    <strong>Cash Change Calculator</strong>
  </div>

  <div style="margin-top:6px;">
    Cash Given: ‚Ç±
    <input type="number" id="cashGiven" placeholder="0.00"
           style="width:90px; padding:4px; font-size:14px;">
  </div>

  <div style="margin-top:6px; font-size:15px;">
    Change: ‚Ç±<span id="changeAmount">0.00</span>
  </div>
</div><br>

    <label>Payment Breakdown:</label>

    <div class="payment-row">
      <span>Cash</span>
      <input type="number" id="payCash" placeholder="0.00">
    </div>

    <div class="payment-row">
      <span>GCash</span>
      <input type="number" id="payGCash" placeholder="0.00">
    </div>

    <div class="payment-row">
      <span>Bank</span>
      <input type="number" id="payBank" placeholder="0.00">
    </div>

  
    <div style="margin-top:10px;">
      <strong>Total Paid: ‚Ç±<span id="paidTotal">0.00</span></strong>
    </div>

    


    <button id="saveYes">Save</button>
    <button id="saveCancel">Cancel</button>
  </div>
</div>



<br>
<img src="baigsLogo.png" alt="Baig's Logo" class="logo">
<h1>Baig's POS</h1>

<div class="menu">
 <h2 style="color: #06812b;">Menu</h2>
  <div id="menuItems"></div>
</div>

<div class="cart" >
  <h2>Cart</h2>
  <div style="overflow-x:auto; background: #d7eb80;">
    <table id="cartTable" >
      <thead>
        <tr>
          <th>Item</th>
          <th>QTY</th>
          <th>Price</th>
          <th>Upgrade</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
   <br>
  <!-- Discount input -->
  <div style="margin-top: 10px;">
    <label for="discount">Discount Input (20% of this will be applied): </label>
    <input type="number" id="discount" value="0" min="0" style="width: 60px;">
  </div>

<!-- SERVICE TYPE -->
<div style="margin-top:10px;">
  <label>Service Type:</label>
  <select id="serviceSelect">
    <option value="Dine-in">Dine-in</option>
    <option value="Take-out">Take-out</option>
    <option value="Pickup">Pickup</option>
    <option value="Delivery">Delivery</option>
  </select>
</div>

<!-- DELIVERY FEE (HIDDEN BY DEFAULT) -->
<div id="deliveryFeeRow" style="display:none; margin-top:10px;">
  <label>Delivery Fee:</label>
  <input type="number" id="deliveryFeeInput" value="0" min="0">
</div>
<br>
<!-- TOTALS -->
<p>Subtotal: ‚Ç±<span id="subtotal">0.00</span></p>
<p>Discount: -‚Ç±<span id="discountAmount">0.00</span></p>
<p>Delivery Fee: ‚Ç±<span id="deliveryDisplay">0.00</span></p>
<h3>Total: ‚Ç±<span id="total">0.00</span></h3>




</div>

<div style="text-align: center; margin: 20px 0;">
 
  <button id="goReceiptBtn" 
          style="padding: 10px 20px; font-size: 16px; cursor: pointer; background: #796d04; color: #fff; border: none; border-radius: 5px;">
    Go to Receipt
  </button>
</div>

<div style=" text-align: center; margin: 20px 0;">
  <button onclick="goToHistory()" 
          style="padding: 10px 20px; font-size: 16px; cursor: pointer; background: #0c4b04; color: #fff; border: none; border-radius: 5px;">
    üìú View History
  </button>
</div>

<button onclick="logout()" style="padding:8px 16px; font-size:16px; margin: 10px;">
  Logout
</button>

<!-- Upgrade Modal -->
<div id="upgradeModal" style="
  display: none;
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0,0,0,0.5);
  z-index: 1000;
  justify-content: center;
  align-items: center;
  flex-direction: column;
">
  <div style="
    background: white;
    padding: 20px;
    border-radius: 10px;
    min-width: 250px;
    max-width: 90%;
    text-align: center;
  ">
    <h3 id="upgradeTitle">Edit Item</h3>
    <div style="margin-top: 10px;">
      <label>Food Name:</label><br>
      <input type="text" id="upgradeName" style="width: 90%; padding: 5px; margin-bottom: 10px;">
      <br>
      <label>Price:</label><br>
      <input type="number" id="upgradePrice" style="width: 90%; padding: 5px; margin-bottom: 10px;">
    </div>
    <button id="saveUpgrade" style="margin-top: 10px; padding: 10px; width: 45%; cursor: pointer;">Save</button>
    <button onclick="closeUpgradeModal()" style="margin-top: 10px; padding: 10px; width: 45%; cursor: pointer;">Cancel</button>
  </div>
</div>

</div>

<script>
const menu = {
  "Biryani": {
    "Chicken": { "Student": 125, "Budget": 240, "Solo": 365, "Regular": 490, "Medium": 615,"Large": 740,  "Jumbo": 865, "Bilao 12": 1355, "Bilao 14": 1970, "Bilao 16": 2710, "Bilao 18": 3575},

    "Beef": { "Student": 135, "Budget": 260, "Solo": 395, "Regular": 530, "Medium": 665,"Large": 800,"Jumbo": 935, "Bilao 12": 1465, "Bilao 14": 2130, "Bilao 16": 2930, "Bilao 18": 3865},

    "Mutton": {"Budget": 314, "Solo": 448, "Regular": 582, "Medium": 716,"Large": 850,"Jumbo": 984, "Bilao 12": 1551, "Bilao 14": 2252, "Bilao 16": 3072, "Bilao 18": 4041},

    "Shrimp": { "Student": 145, "Budget": 280, "Solo": 425, "Regular": 560, "Medium": 695,"Large": 830,"Jumbo": 965, "Bilao 12": 1525, "Bilao 14": 2220, "Bilao 16": 3050, "Bilao 18": 4015},
     
  },

  "Kabsah": {
    "Chicken": { "Small": 195, "Medium": 395, "Large" : 799,  },

    "Beef": { "Student": 135, "Budget": 260, "Solo": 395, "Regular": 530, "Medium": 665,"Large": 800,"Jumbo": 935, "Bilao 12": 1465, "Bilao 14": 2130, "Bilao 16": 2930, "Bilao 18": 3865},

    
    "Mutton": {"Budget": 314, "Solo": 448, "Regular": 582, "Medium": 716,"Large": 850,"Jumbo": 984, "Bilao 12": 1551, "Bilao 14": 2252, "Bilao 16": 3072, "Bilao 18": 4041},

     "Shrimp": { "Student": 145, "Budget": 280, "Solo": 425, "Regular": 560, "Medium": 695,"Large": 830,"Jumbo": 965, "Bilao 12": 1525, "Bilao 14": 2220, "Bilao 16": 3050, "Bilao 18": 4015},
    
  },

   "Mandi": {
    "Chicken": { "Student": 140, "Budget": 255, "Solo": 380, "Regular": 505, "Medium": 630,"Large": 755,  "Jumbo": 880, "Bilao 12": 1385, "Bilao 14": 1970, "Bilao 16": 2710, "Bilao 18": 3575},

    "Beef": { "Student": 135, "Budget": 260, "Solo": 395, "Regular": 530, "Medium": 680,"Large": 800,"Jumbo": 935, "Bilao 12": 1465, "Bilao 14": 2130, "Bilao 16": 2930, "Bilao 18": 3865},

    
    "Mutton": {"Budget": 314, "Solo": 448, "Regular": 582, "Medium": 716,"Large": 850,"Jumbo": 984, "Bilao 12": 1551, "Bilao 14": 2252, "Bilao 16": 3072, "Bilao 18": 4041},

     "Shrimp": { "Student": 145, "Budget": 280, "Solo": 425, "Regular": 560, "Medium": 695,"Large": 830,"Jumbo": 965, "Bilao 12": 1525, "Bilao 14": 2220, "Bilao 16": 3050, "Bilao 18": 4015},
    
  },


   "Maqloobah": {
    "Chicken": { "Student": 160, "Budget": 275, "Solo": 400, "Regular": 525, "Medium": 650,"Large": 775,  "Jumbo": 900, "Bilao 12": 1390, "Bilao 14": 2005, "Bilao 16": 2745, "Bilao 18": 3610},

    "Beef": { "Student": 165, "Budget": 295, "Solo": 430, "Regular": 565, "Medium": 700,"Large": 835,"Jumbo": 970, "Bilao 12": 1500, "Bilao 14": 2165, "Bilao 16": 2965, "Bilao 18": 3900},

    
    "Mutton": {"Budget": 349, "Solo": 483, "Regular": 617, "Medium": 751,"Large": 885,"Jumbo": 1019, "Bilao 12": 1586, "Bilao 14": 2287, "Bilao 16": 3107, "Bilao 18": 4076},

     "Shrimp": { "Student": 180, "Budget": 297, "Solo": 424, "Regular": 551, "Medium": 678,"Large": 805,"Jumbo": 932, "Bilao 12": 1448, "Bilao 14": 2091, "Bilao 16": 2861, "Bilao 18": 3758},
    
  },

   "Kabab": {
    "Chicken w/ Khubz": {"Budget": 155, "Solo": 232, "Regular": 387, "Medium": 615,"Large": 844,  "Jumbo": 1073, "Bilao 12": 1532, "Bilao 16": 3439},

    "Chicken w/ Rice":{"Budget": 193, "Solo": 294, "Regular": 491, "Medium": 779,"Large": 1068,  "Jumbo": 1357, "Bilao 12": 2133, "Bilao 16": 4552},
    
    "Beef w/ Khubz":{"Budget": 219, "Solo":333, "Regular": 554, "Medium": 882,"Large": 1211,  "Jumbo": 1539, "Bilao 12": 2418, "Bilao 16": 5158},

     "Beef w/ Rice":{"Budget": 251, "Solo":383, "Regular": 625, "Medium": 999,"Large": 1371,  "Jumbo": 1744, "Bilao 12": 2737, "Bilao 16": 5843},

     "Mixed Chicken&Beef w/ Khubz":{"Budget": 189, "Solo":300, "Regular": 491, "Medium": 758,"Large": 1057,  "Jumbo": 1326, "Bilao 12": 2081, "Bilao 16": 4464},

     "Mixed Chicken&Beef w/ Rice":{"Budget": 221, "Solo":352, "Regular": 578, "Medium": 902,"Large": 1254,  "Jumbo": 1605, "Bilao 12": 2479, "Bilao 16": 5278},
  },
  

  "Tikkah": {
    "Chicken w/ Khubz": {"Budget": 155, "Solo": 232, "Regular": 387, "Medium": 615,"Large": 844,  "Jumbo": 1073, "Bilao 12": 1532, "Bilao 16": 3439},

    "Chicken w/ Rice":{"Budget": 193, "Solo": 294, "Regular": 491, "Medium": 779,"Large": 1068,  "Jumbo": 1357, "Bilao 12": 2133, "Bilao 16": 4552},
    
    "Beef w/ Khubz":{"Budget": 219, "Solo":333, "Regular": 554, "Medium": 882,"Large": 1211,  "Jumbo": 1539, "Bilao 12": 2418, "Bilao 16": 5158},

     "Beef w/ Rice":{"Budget": 251, "Solo":383, "Regular": 625, "Medium": 999,"Large": 1371,  "Jumbo": 1744, "Bilao 12": 2737, "Bilao 16": 5843},

     "Mixed Chicken&Beef w/ Khubz":{"Budget": 189, "Solo":300, "Regular": 491, "Medium": 758,"Large": 1057,  "Jumbo": 1326, "Bilao 12": 2081, "Bilao 16": 4464},

     "Mixed Chicken&Beef w/ Rice":{"Budget": 221, "Solo":352, "Regular": 578, "Medium": 902,"Large": 1254,  "Jumbo": 1605, "Bilao 12": 2479, "Bilao 16": 5278},
  },


  "Broasted": {
    "Chicken": {"Solo": 138, "Regular": 271, "Medium": 406,"Large": 539,  "Jumbo": 672, "Extra Jumbo": 806},
  },

   "Pastil": {
    "Plain Rice": { "1 serving": 49 },
    "Yellow Rice": { "1 serving": 69 }
  },  

    "Mixed Biryani/Kabsah/Mandi": {
    "Chicken & Beef":  {"Solo": 500, "Regular": 635, "Medium": 760,"Large": 1020,"Jumbo": 1155, "Bilao 12": 1405, "Bilao 14": 1675, "Bilao 16": 2330, "Bilao 18": 4100},
    "Beef & Mutton":  {"Solo": 574, "Regular": 708, "Medium": 843,"Large": 1112,"Jumbo": 1246, "Bilao 12": 1515, "Bilao 14": 1784, "Bilao 16": 2486, "Bilao 18": 4382},
    "Mutton & Chicken":  {"Solo": 554, "Regular": 688, "Medium": 813,"Large": 1072,"Jumbo": 1206, "Bilao 12": 1465, "Bilao 14": 1724, "Bilao 16": 2416, "Bilao 18": 4222},
    "Chicken & Shrimp":  {"Solo": 520, "Regular": 665, "Medium": 790,"Large": 1050,"Jumbo": 1185, "Bilao 12": 1445, "Bilao 14": 1705, "Bilao 16": 2390, "Bilao 18": 4190},
    "Beef & Shrimp ":  {"Solo": 540, "Regular": 685, "Medium": 820,"Large": 1090,"Jumbo": 1225, "Bilao 12": 1495, "Bilao 14": 1765, "Bilao 16": 2460, "Bilao 18": 4350},
    "Mutton & Shrimp":  {"Solo": 594, "Regular": 739, "Medium": 873,"Large": 1142,"Jumbo": 1277, "Bilao 12":1546, "Bilao 14": 1815, "Bilao 16": 2509, "Bilao 18": 4472},
  },

  "Masala": {
    "Chicken":{"Budget": 189, "Solo": 288, "Regular": 365, "Medium": 452,"Large": 545,  "Jumbo": 632, "Extra Jumbo": 980},
    "Beef":{"Budget": 222, "Solo": 336, "Regular": 405, "Medium": 502,"Large": 605,  "Jumbo": 702, "Extra Jumbo": 1040},
    "Mutton":{"Budget": 276, "Solo": 415, "Regular": 690, "Medium": 961,"Large": 1232,  "Jumbo": 1503, "Extra Jumbo": 2193},
    "Shrimp":{"Budget": 224, "Solo": 330, "Regular": 391, "Medium": 480,"Large": 575,  "Jumbo": 664, "Extra Jumbo": 1038},
  },

   "Korma": {
    "Chicken":{"Budget": 189, "Solo": 288, "Regular": 365, "Medium": 452,"Large": 545,  "Jumbo": 632, "Extra Jumbo": 980},
    "Beef":{"Budget": 222, "Solo": 336, "Regular": 405, "Medium": 502,"Large": 605,  "Jumbo": 702, "Extra Jumbo": 1040},
    "Mutton":{"Budget": 276, "Solo": 415, "Regular": 690, "Medium": 961,"Large": 1232,  "Jumbo": 1503, "Extra Jumbo": 2193},
    "Shrimp":{"Budget": 224, "Solo": 330, "Regular": 391, "Medium": 480,"Large": 575,  "Jumbo": 664, "Extra Jumbo": 1038}
  },

   "Nihari": {
    "Chicken":{"Budget": 189, "Solo": 288, "Regular": 365, "Medium": 452,"Large": 545,  "Jumbo": 632, "Extra Jumbo": 980},
    "Beef":{"Budget": 222, "Solo": 336, "Regular": 405, "Medium": 502,"Large": 605,  "Jumbo": 702, "Extra Jumbo": 1040},
    "Mutton":{"Budget": 276, "Solo": 415, "Regular": 690, "Medium": 961,"Large": 1232,  "Jumbo": 1503, "Extra Jumbo": 2193},
    "Shrimp":{"Budget": 224, "Solo": 330, "Regular": 391, "Medium": 480,"Large": 575,  "Jumbo": 664, "Extra Jumbo": 1038}
  },

   "Curry": {
    "Chicken":{"Budget": 189, "Solo": 288, "Regular": 365, "Medium": 452,"Large": 545,  "Jumbo": 632, "Extra Jumbo": 980},
    "Beef":{"Budget": 222, "Solo": 336, "Regular": 405, "Medium": 502,"Large": 605,  "Jumbo": 702, "Extra Jumbo": 1040},
    "Mutton":{"Budget": 276, "Solo": 415, "Regular": 690, "Medium": 961,"Large": 1232,  "Jumbo": 1503, "Extra Jumbo": 2193},
    "Shrimp":{"Budget": 224, "Solo": 330, "Regular": 391, "Medium": 480,"Large": 575,  "Jumbo": 664, "Extra Jumbo": 1038},
  },


  "Hummus": {
    "Hummus":{"Hummus only": 144, "Hummus w/ Khubz": 166, "Hummus w/ Khubz & Salatah": 227}
},

  "Haleem": {
    "Plain":{"Solo": 158, "Regular": 242, "Medium": 392,"Large": 543,  "Jumbo": 693, "Extra Jumbo": 1021},
    "Chicken":{"Solo": 226, "Regular": 424, "Medium": 601,"Large": 820,  "Jumbo": 1019, "Extra Jumbo": 1493},
    "Beef":{"Solo": 300, "Regular": 559, "Medium": 835,"Large": 1077,  "Jumbo": 1335, "Extra Jumbo": 1964},
    "Mutton":{"Solo": 493, "Regular": 810, "Medium": 1295,"Large": 1779,  "Jumbo": 2263, "Extra Jumbo": 3306},
  },


  "Shawarma": {
    "Chicken": { "Small": 60, "Large": 85 },
    "Beef": { "Small": 85, "Large": 110 },
    "Egg": { "Small": 35, "Large": 60 },
  },

   "Shawarma Rice": {
    "Chicken":  {"Solo": 137, "Regular": 267, "Medium": 400,"Large": 534,"Jumbo": 667, "Bilao 12": 1239, "Bilao 14": 1856, "Bilao 16": 2629, "Bilao 18": 3864},
    "Beef":  {"Solo": 159, "Regular": 311, "Medium": 466,"Large": 621,"Jumbo": 776, "Bilao 12": 1064, "Bilao 14": 1594, "Bilao 16": 2257, "Bilao 18": 3318},
    "Mixed":  {"Bilao 12": 1155, "Bilao 14": 1443, "Bilao 16": 2302, "Bilao 18": 3450}
  },

 "Drinks": {
  "Softdrinks": { "Coke in can": 55, "Sprite in can": 55, "Royal in can": 55, "Pepsi in can": 55, "Mismo": 35},
  "Bottled Water": { "Small": 15, "Big": 25},
  "Lemonade": { "Small": 79, "Large": 101, "Big": 149, "Pitcher": 250},
  "Black Chai": { "Cup": 55, "Kettle": 115},
  "Chai w/ Milk": { "Cup": 70, "Kettle": 135},
  "Lassi Plain": { "Small": 98, "Large": 159, "Big": 193},
  "Lassi w/ Flavor": { "Small": 123, "Large": 185, "Big": 221},
  "Mango Shake": { "Small": 79, "Large": 101, "Big": 149},
  "Banana Shake": { "Small": 79, "Large": 101, "Big": 149},
  "Cookies & Cream Shake": { "Small": 97, "Large": 122, "Big": 157},
},

"Pita": {
  "Chappati": { "1 piece": 25},
  "Khuboos": { "Small": 17, "Large": 23, "Small Pack": 165, "Large Pack": 110},
  "Paratha": { "Plain": 55, "w/ Cheese": 65, "w/ Butter": 65, "w/ Sugar": 65, "w/ Garlic": 65, "w/ Egg": 99,"Aloo": 105}, 
},

"Samosa": {
   "Plain": { "Plain Veggies":25},
   "Chicken": { "Chicken & Veggies":35, "Chicken & Veggies w/ cheese":45, "Chicken all meat":40, "Chicken & Cheese":50},
   "Beef": {"Beef & Veggies":45,"Beef & Veggies w/ Cheese":55,  "Beef all meat":50,  "Beef & Cheese":60}
},

"Add-ons": {
  "Rice": { "Biryani": 55,"Kabsah": 55, "White": 35},
  "Fries": { "Small": 25, "Regular": 50, "Medium": 75, "Large": 100, "Jumbo": 125},
  "Garlic Sauce": { "2.5oz": 35, "3.5oz": 45, "250ml": 140},
  "Hot Sauce": { "2.5oz": 35, "3.5oz": 45, "250ml": 140},
  "Salatah": { "2.5oz": 25, "3.5oz": 35, "250ml": 140}, 
  "Raita": { "Tub": 125},
  "Palapa": { "Tub": 199},
},

"Combos": {
  "Combo 1-10": {  "Combo 1":99,  "Combo 2":159,   "Combo 3":210, "Combo 4":193,"Combo 5":176,"Combo 6":222,"Combo 7":159,"Combo 8":129,"Combo 9":251,"Combo 10":206},
  "Combo A-L": {  "Combo A":201,   "Combo B":247,  "Combo C":229,  "Combo D":247,  "Combo E":178,"Combo F":155, "Combo G":155,  "Combo H":133, "Combo i":268, "Combo J":245,"Combo K":237, "Combo L":278,},
  
}
  
};


let cart = [];
let discountAmount = parseFloat(localStorage.getItem("discount")) || 0;
let deliveryFee = 0;

// DOM elements
const menuDiv = document.getElementById('menuItems');
const cartTableBody = document.querySelector('#cartTable tbody');
const subtotalSpan = document.getElementById('subtotal');
const discountSpan = document.getElementById('discountAmount');
const totalSpan = document.getElementById('total');
const deliveryDisplay = document.getElementById('deliveryDisplay');
const serviceSelect = document.getElementById('serviceSelect');
const deliveryFeeInput = document.getElementById('deliveryFeeInput');

// Track selected service
let selectedService = serviceSelect.value;
serviceSelect.addEventListener("change", () => {
  selectedService = serviceSelect.value;
  const deliveryFeeRow = document.getElementById('deliveryFeeRow');
  if(selectedService === "Delivery") {
    deliveryFeeInput.parentElement.style.display = "block";
  } else {
    deliveryFeeInput.parentElement.style.display = "none";
    deliveryFeeInput.value = 0;
    deliveryFee = 0;
  }
  renderCart();
});

// Update delivery fee live
deliveryFeeInput.addEventListener("input", () => {
  deliveryFee = parseFloat(deliveryFeeInput.value) || 0;
  renderCart();
});

// =======================
// MENU RENDERING
// =======================
function renderCategories() {
  menuDiv.innerHTML = '';
  const title = document.createElement('h3');
  title.textContent = 'Select Category';
  menuDiv.appendChild(title);

  Object.keys(menu).forEach(category => {
    const btn = document.createElement('button');
    btn.className = 'category-btn';
    btn.textContent = category;
    btn.onclick = () => renderVariants(category);
    menuDiv.appendChild(btn);
  });
}

function renderVariants(category) {
  menuDiv.innerHTML = '';
  const title = document.createElement('h3');
  title.textContent = `Category: ${category}`;
  menuDiv.appendChild(title);

  const backBtn = document.createElement('button');
  backBtn.className = 'backBtn';
  backBtn.textContent = '‚¨Ö Back to Categories';
  backBtn.onclick = () => renderCategories();
  menuDiv.appendChild(backBtn);

  const variants = menu[category];
  Object.keys(variants).forEach(variant => {
    const btn = document.createElement('button');
    btn.className = 'variant-btn';
    btn.textContent = variant;
    btn.onclick = () => renderSizes(category, variant);
    menuDiv.appendChild(btn);
  });
}

function renderSizes(category, variant) {
  menuDiv.innerHTML = '';
  const title = document.createElement('h3');
  title.textContent = `Category: ${category} | Variant: ${variant}`;
  menuDiv.appendChild(title);



  // Direct back to main categories
  const mainBackBtn = document.createElement('button');
  mainBackBtn.className = 'backBtn';
  mainBackBtn.textContent = '‚¨Ö Back to Categories';
  mainBackBtn.onclick = () => renderCategories();
  menuDiv.appendChild(mainBackBtn);

    // Back to previous variant menu
  const backBtn = document.createElement('button');
  backBtn.className = 'backBtn';
  backBtn.textContent = '‚¨Ö Back';
  backBtn.onclick = () => renderVariants(category);
  menuDiv.appendChild(backBtn);

  const sizes = menu[category][variant];
  Object.keys(sizes).forEach(size => {
    const price = sizes[size];
    const btn = document.createElement('button');
    btn.className = 'size-btn';
    btn.textContent = `${variant} (${size}) - ‚Ç±${price}`;
    btn.onclick = () => {
      cart.push({ name: `${category} - ${variant} (${size})`, price, qty: 1 });
      renderCart();
    };
    menuDiv.appendChild(btn);
  });
}
// =======================
// CART FUNCTIONS
// =======================
let currentUpgradeIndex = null;

function openUpgradeModal(item, index) {
  currentUpgradeIndex = index;
  document.getElementById('upgradeName').value = item.name;
  document.getElementById('upgradePrice').value = item.price;
  document.getElementById('upgradeModal').style.display = 'flex';
}

function closeUpgradeModal() {
  document.getElementById('upgradeModal').style.display = 'none';
}

document.getElementById('saveUpgrade').addEventListener('click', () => {
  if(currentUpgradeIndex !== null) {
    const newName = document.getElementById('upgradeName').value.trim();
    const newPrice = parseFloat(document.getElementById('upgradePrice').value) || 0;
    cart[currentUpgradeIndex].name = newName || cart[currentUpgradeIndex].name;
    cart[currentUpgradeIndex].price = newPrice;
    renderCart();
    closeUpgradeModal();
  }
});

function renderCart() {
  cartTableBody.innerHTML = '';
  let subtotal = 0;

  cart.forEach((item, index) => {
    const row = document.createElement('tr');

    // Item name
    const nameCell = document.createElement('td');
    nameCell.textContent = item.name;
    row.appendChild(nameCell);

    // QTY
    const qtyCell = document.createElement('td');
    const qtyContainer = document.createElement('div');
    qtyContainer.className = 'qty-container';

    const minusBtn = document.createElement('button');
    minusBtn.textContent = '-';
    minusBtn.onclick = () => {
      if(item.qty > 1) { item.qty--; renderCart(); }
    };

    const qtySpan = document.createElement('span');
    qtySpan.textContent = item.qty;

    const plusBtn = document.createElement('button');
    plusBtn.textContent = '+';
    plusBtn.onclick = () => {
      item.qty++;
      renderCart();
    };

    qtyContainer.appendChild(minusBtn);
    qtyContainer.appendChild(qtySpan);
    qtyContainer.appendChild(plusBtn);
    qtyCell.appendChild(qtyContainer);
    row.appendChild(qtyCell);

    // Price
    const priceCell = document.createElement('td');
    const itemTotal = item.price * item.qty;
    priceCell.textContent = `‚Ç±${itemTotal}`;
    row.appendChild(priceCell);


    // Upgrade button
const upgradeCell = document.createElement('td');
const upgradeBtn = document.createElement('button');
upgradeBtn.textContent = 'UP';
upgradeBtn.style.backgroundColor = '#06812b';
upgradeBtn.style.color = 'white';
upgradeBtn.style.border = 'none';
upgradeBtn.style.padding = '3px 6px';
upgradeBtn.style.cursor = 'pointer';
upgradeBtn.style.borderRadius = '3px';
upgradeBtn.onclick = () => openUpgradeModal(item, index);
upgradeCell.appendChild(upgradeBtn);
row.appendChild(upgradeCell);



    // Delete button
    const deleteCell = document.createElement('td');
    const deleteBtn = document.createElement('button');
    deleteBtn.textContent = 'Delete';
    deleteBtn.style.backgroundColor = '#ff4d4d';
    deleteBtn.style.color = 'white';
    deleteBtn.style.border = 'none';
    deleteBtn.style.padding = '3px 6px';
    deleteBtn.style.cursor = 'pointer';
    deleteBtn.style.borderRadius = '3px';
    deleteBtn.onclick = () => { cart.splice(index,1); renderCart(); };
    deleteCell.appendChild(deleteBtn);
    row.appendChild(deleteCell);

    cartTableBody.appendChild(row);

    subtotal += itemTotal;
  });
  discountAmount = parseFloat(document.getElementById('discount').value) * 0.2 || 0;
  if(selectedService==="Delivery") deliveryFee = parseFloat(deliveryFeeInput.value)||0;
  else deliveryFee=0;

  const total = Math.max(0, subtotal - discountAmount + deliveryFee);

  subtotalSpan.textContent = subtotal.toFixed(2);
  discountSpan.textContent = discountAmount.toFixed(2);
  deliveryDisplay.textContent = deliveryFee.toFixed(2);
  totalSpan.textContent = total.toFixed(2);

  localStorage.setItem("cart", JSON.stringify(cart));
  localStorage.setItem("discount", discountAmount);
  localStorage.setItem("deliveryFee", deliveryFee);
  localStorage.setItem("service", selectedService);
}

document.getElementById('discount').addEventListener('input', renderCart);

document.getElementById('goReceiptBtn').addEventListener('click', () => {
  if(cart.length===0){ alert("Cart is empty!"); return; }
  window.location.href='receipt.html';
});

// INITIALIZE MENU
renderCategories();



let waitlist = JSON.parse(localStorage.getItem("waitlist")) || [];
const table = document.getElementById("waitlistTable");

function renderWaitlist() {
  table.innerHTML = "";
  if(waitlist.length === 0) {
    table.innerHTML = '<tr><td colspan="4">No waitlisted receipts</td></tr>';
    return;
  }

waitlist.forEach((r, index) => {
  const row = document.createElement("tr");
  row.innerHTML = `
    <td>${r.id}</td>
    <td>${r.customerName || "-"}</td>
    <td>${r.date}</td>
    <td>‚Ç±${r.total.toFixed(2)}</td>
    <td>
      <button class="save-btn" onclick="openSaveModal(${index})">üíæ Save</button>
      <button class="delete-btn" onclick="deleteFromWaitlist(${index})">‚ùå Delete</button>
    </td>
  `;
  table.appendChild(row);
});

}

function deleteFromWaitlist(index) {
  if(confirm("Delete this waitlisted receipt?")) {
    waitlist.splice(index, 1);
    localStorage.setItem("waitlist", JSON.stringify(waitlist));
    renderWaitlist();
  }
}

renderWaitlist();

// --- SAVE MODAL LOGIC ---
let currentWaitlistIndex = null;

const cashGivenInput = document.getElementById("cashGiven");
const changeAmountSpan = document.getElementById("changeAmount");
const totalDueSpan = document.getElementById("totalDue");

function updateChange() {
  const totalDue = parseFloat(totalDueSpan.textContent) || 0;
  const cashGiven = parseFloat(cashGivenInput.value) || 0;
  let change = cashGiven - totalDue;
  if (change < 0) change = 0;
  changeAmountSpan.textContent = change.toFixed(2);
  changeAmountSpan.style.color = cashGiven >= totalDue ? "lime" : "red";
}

cashGivenInput.addEventListener("input", updateChange);

function openSaveModal(index) {
  currentWaitlistIndex = index;
  const r = waitlist[index];

  totalDueSpan.textContent = r.total.toFixed(2);

  document.getElementById("payCash").value = r.payment?.cash || 0;
  document.getElementById("payGCash").value = r.payment?.gcash || 0;
  document.getElementById("payBank").value = r.payment?.bank || 0;
  document.getElementById("serviceSelect").value = r.service || "Dine-in";

  document.getElementById("paidTotal").textContent = getPaymentTotal().toFixed(2);

  cashGivenInput.value = "";
  changeAmountSpan.textContent = "0.00";

  document.getElementById("saveModal").style.display = "flex";
}

function closeSaveModal() {
  document.getElementById("saveModal").style.display = "none";
}

function getPaymentTotal() {
  const cash = parseFloat(document.getElementById("payCash").value) || 0;
  const gcash = parseFloat(document.getElementById("payGCash").value) || 0;
  const bank = parseFloat(document.getElementById("payBank").value) || 0;
  return cash + gcash + bank;
}

// Update total paid live
["payCash","payGCash","payBank"].forEach(id => {
  document.getElementById(id).addEventListener("input", () => {
    document.getElementById("paidTotal").textContent =
      getPaymentTotal().toFixed(2);
  });
});

// Save waitlisted receipt to history
document.getElementById("saveYes").addEventListener("click", () => {
  if(currentWaitlistIndex === null) return;
  const r = waitlist[currentWaitlistIndex];
  const paidTotal = getPaymentTotal();

  if(paidTotal !== r.total) {
    alert("Payment amount must equal total ‚Ç±" + r.total.toFixed(2));
    return;
  }

  // Update receipt info
  r.payment = {
    cash: parseFloat(document.getElementById("payCash").value) || 0,
    gcash: parseFloat(document.getElementById("payGCash").value) || 0,
    bank: parseFloat(document.getElementById("payBank").value) || 0
  };
  r.service = document.getElementById("serviceSelect").value;

  // Add to receipts history
  let receipts = JSON.parse(localStorage.getItem("receipts")) || [];
  receipts.push(r);
  localStorage.setItem("receipts", JSON.stringify(receipts));

  // Remove from waitlist
  waitlist.splice(currentWaitlistIndex, 1);
  localStorage.setItem("waitlist", JSON.stringify(waitlist));
  currentWaitlistIndex = null;

  renderWaitlist();
  closeSaveModal();
});
document.getElementById("saveCancel").addEventListener("click", closeSaveModal);


</script>

<script>
  function goToHistory() {
    window.location.href = "history.html";
  }

  function logout() {
  // Remove login flag
  localStorage.removeItem("adminLoggedIn");
  
  // Redirect to login page
  window.location.href = "login.html";
  }

</script>

<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('service-worker.js')
      .then(reg => console.log('Service Worker registered.', reg))
      .catch(err => console.error('Service Worker registration failed:', err));
  });
}
</script>

</body>
</html>



